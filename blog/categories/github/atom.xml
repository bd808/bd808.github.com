<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: github | bd808.com]]></title>
  <link href="http://bd808.com/blog/categories/github/atom.xml" rel="self"/>
  <link href="http://bd808.com/"/>
  <updated>2014-11-16T10:49:26-07:00</updated>
  <id>http://bd808.com/</id>
  <author>
    <name><![CDATA[Bryan Davis]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Hacking GitHub Contributions Calendar]]></title>
    <link href="http://bd808.com/blog/2013/04/17/hacking-github-contributions-graph/"/>
    <updated>2013-04-17T21:06:00-06:00</updated>
    <id>http://bd808.com/blog/2013/04/17/hacking-github-contributions-graph</id>
    <content type="html"><![CDATA[<p>GitHub profile pages include a neat visualization of commit history that they
call the &ldquo;<a href="https://help.github.com/articles/viewing-contributions#contributions-calendar">contributions calendar</a>&rdquo;. This 53x7 grid shows the number of
commits and other GitHub interactions that the user performed on each day for
the last year.</p>

<p><img src="/images/blog/timeline.png" alt="Example graph"></p>

<p>Each cell in the graph is shaded with one of 5 possible colors. These colors
correspond to the <a href="https://en.wikipedia.org/wiki/Quartile">quartiles</a> of the <a href="https://en.wikipedia.org/wiki/Normal_distribution">normal distribution</a> over the range
<code>[0, max(v)]</code> where <code>v</code> is the sum of issues opened, pull requests proposed and commits authored per day.</p>

<!-- more -->

<p>If your all time high for the last year was 100 contributions in a single day,
the cells would color like this:</p>

<table><thead>
<tr>
<th style="text-align: left">Contributions</th>
<th style="text-align: center">Color</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">0</td>
<td style="text-align: center"><img src="/images/blog/eeeeee.png" alt="gray" title="#eeeeee"></td>
</tr>
<tr>
<td style="text-align: left">1  - 24</td>
<td style="text-align: center"><img src="/images/blog/d6e685.png" alt="pale green" title="#d6e685"></td>
</tr>
<tr>
<td style="text-align: left">25 - 49</td>
<td style="text-align: center"><img src="/images/blog/8cc665.png" alt="light green" title="#8cc665"></td>
</tr>
<tr>
<td style="text-align: left">50 - 74</td>
<td style="text-align: center"><img src="/images/blog/44a340.png" alt="green" title="#44a340"></td>
</tr>
<tr>
<td style="text-align: left">75+</td>
<td style="text-align: center"><img src="/images/blog/1e6823.png" alt="dark green" title="#1e6823"></td>
</tr>
</tbody></table>

<p>A tweet got me interested in the possibility of gaming the interaction data to
control the display:</p>

<p><blockquote class="twitter-tweet"><p>GitHub users might find this guy&rsquo;s contribution graph interesting/funny: <a href="https://t.co/xOFjLbqUK2" title="https://github.com/will">github.com/will</a></p>&mdash; Peter Cooper (@peterc) <a href="https://twitter.com/peterc/status/322636613018607617">April 12, 2013</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p><a href="https://github.com/will">@will</a> has done something to make his calendar spell &ldquo;WILL&rdquo; over and over.
Looking at his contribution activity list it was pretty obvious that this
trick had something to do with the <a href="https://github.com/will/githubprofilecheat">will/githubprofilecheat</a> and/or
<a href="https://github.com/will/githubprofilecheat2">will/githubprofilecheat2</a> repositories.</p>

<p>I did some digging in the <a href="http://git-scm.com/docs">git documentation</a> to see how hard it is to fake
the date on a commit. It turns out that it&rsquo;s as easy as setting an environment
variable. The <code>GIT_AUTHOR_DATE</code> and <code>GIT_COMMITTER_DATE</code> environment variables
can be used to provide <a href="http://git-scm.com/docs/git-commit-tree#_commit_information">git-commit-tree</a> with dates for the author and
commit dates that are attached to each commit object.</p>

<p>Armed with this bit of trivia I decided that I would try to do something
interesting with my contributions graph. I didn&rsquo;t just want to copy <a href="https://github.com/will">@will</a>
and write my name in the graph. I decided that I would pay homage to my
gravatar instead and make a series of <a href="https://en.wikipedia.org/wiki/Glider_%28Conway%27s_Life%29">gliders</a> that ran across the
timeline. The result of my experiment can be seen in the image at the top of
this post.</p>

<p>The script that I used to generate the commits with faked dates is available
in my <a href="https://github.com/bd808/profile-life">bd808/profile-life</a> repository.</p>

<p>The script takes the path to a pattern file and an optional start date as
arguments.</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">./bin/pattern-to-commits.sh patterns/glider.cells 2012-04-15 <span class="p">|</span> sh
</code></pre></div>
<p>The pattern file is expected to be in the <a href="http://www.conwaylife.com/wiki/Plaintext">plaintext</a> Life format. This
format allows you to specify an on/off pattern. When a cell is &ldquo;on&rdquo; the script
will output 23 commits (one per hour) for the corresponding day. &ldquo;Off&rdquo; cells
won&rsquo;t generate any commit activity.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">!Name: Profile Glider Train
!A simulation of a glider cruising across the contributions timeline.
O.O...O.O....O..................................................................
.OO.O.O..OO...O.O.O...O.O....O..................................................
.O...OO.OO..OOO..OO.O.O..OO...O.O.O...O.O....O..................................
.................O...OO.OO..OOO..OO.O.O..OO...O.O.O...O.O....O..................
.................................O...OO.OO..OOO..OO.O.O..OO...O.O.O...O.O....O..
.................................................O...OO.OO..OOO..OO.O.O..OO...O.
.................................................................O...OO.OO..OOO.
</code></pre></div>
<p>The script reads in this file a column at a time using the <code>cut</code> command. It
loops over the characters from the column and when it finds an <code>O</code> it echos
commit commands to stdout:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nv">GIT_AUTHOR_DATE</span><span class="o">=</span><span class="s1">&#39;2013-04-17T20:00&#39;</span> <span class="nv">GIT_COMMITTER_DATE</span><span class="o">=</span><span class="s1">&#39;2013-04-17T20:00&#39;</span> <span class="se">\</span>
git commit --allow-empty -m <span class="s1">&#39;2013-04-17T20:00&#39;</span>
</code></pre></div>
<p>This output can be piped to bash to apply the commits to the repository.</p>

<p>An interesting extension of this script would be to support all 5 possible
colors. It would also be nice if the script read your current contribution
history to determine how many commits are necessary to hit the 4th quartile
every time. For now these additions are left as an exercise for the reader. :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using GitHub issues for comments]]></title>
    <link href="http://bd808.com/blog/2012/04/14/using-github-issues-for-comments/"/>
    <updated>2012-04-14T20:22:00-06:00</updated>
    <id>http://bd808.com/blog/2012/04/14/using-github-issues-for-comments</id>
    <content type="html"><![CDATA[<p>I was inspired by <a href="http://ivanzuzak.info/2011/02/18/github-hosted-comments-for-github-hosted-blogs.html">Ivan Zuzak&rsquo;s post</a> to try using GitHub issues on the <a href="https://github.com/bd808/bd808.github.com">repository for this blog</a> to collect and display reader comments. I&rsquo;m using <a href="http://octopress.org/">Octopress</a> to generate the site, so I decided to make some customizations to make applying Ivan&rsquo;s ideas easy for me.</p>

<p>I started by adding a new configuration setting to my <code>_config.yml</code> file: <code>github_comments: true</code>. I&rsquo;ll use this configuration switch to turn the new feature on in other places in the codebase.</p>

<!-- more -->

<p>Next I changed the <a href="https://github.com/mojombo/jekyll/wiki/Liquid-Extensions">Liquid template</a> in source/_layout/post.html to include a link to the comment thread for the post. I added this block right after the existing disqus rendering block:</p>

<p><figure class='code'><figcaption><span>source/<u>layout/post.html </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% if site.github_comments and page.github_issue_id %}
</span><span class='line'><span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">&quot;comments&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;header&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h2&gt;</span>Comments<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p&gt;</span>Visit <span class="ni">&amp;lt;</span>a href=<span class="ni">&amp;ldquo;</span><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://github.com/%7B%7Bsite.github_user%7D%7D/%7B%7Bsite.github&quot;</span><span class="nt">&gt;</span>https://github.com/{{site.github_user}}/{{site.github<span class="nt">&lt;/a&gt;&lt;/u&gt;</span>user}}.github.com/issues/{{page.github_issue_id}}<span class="ni">&amp;rdquo;&amp;gt;</span>this post<span class="ni">&amp;rsquo;</span>s issue page on GitHub<span class="nt">&lt;/a&gt;</span> to add a comment.<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/header&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span><span class='line'>{% endif %}
</span></code></pre></td></tr></table></div></figure></p>

<p>If the <code>github_comments: true</code> flag is set and the <a href="https://github.com/mojombo/jekyll/wiki/yaml-front-matter">yaml front
matter</a> for the post
contains a <code>github_issue_id: N</code> setting, this block with display a link to
issue N in the associated GitHub repository.</p>

<p>Next I wanted to display any current comments. I use a slightly tweaked
version of Ivan&rsquo;s javascript to do this.</p>

<p><figure class='code'><figcaption><span>source/<u>includes/github_comments.html </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% if site.github_comments and page.comments == true %}
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">url</span><span class="o">:</span> <span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;https://api.github.com/repos/%7B%7Bsite.github_user%7D%7D/%7B%7Bsite.github_user%7D%7D.github.com/issues/%7B%7Bpage.github_issue_id%7D%7D/comments&quot;</span><span class="o">&gt;</span><span class="nx">https</span><span class="o">:</span><span class="c1">//api.github.com/repos/{{site.github_user}}/{{site.github_user}}.github.com/issues/{{page.github_issue_id}}/comments&lt;/a&gt;&amp;quot;</span>
</span><span class='line'>  <span class="p">,</span> <span class="nx">method</span><span class="o">:</span> <span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="nx">get</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span>
</span><span class='line'>  <span class="p">,</span> <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="nx">Accept</span><span class="o">:</span> <span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="nx">application</span><span class="o">/</span><span class="nx">vnd</span><span class="p">.</span><span class="nx">github</span><span class="p">.</span><span class="nx">full</span><span class="o">+</span><span class="nx">json</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>  <span class="p">,</span> <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){}</span>
</span><span class='line'>  <span class="p">,</span> <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">cuser</span><span class="p">,</span> <span class="nx">cuserlink</span><span class="p">,</span> <span class="nx">clink</span><span class="p">,</span> <span class="nx">cbody</span><span class="p">,</span> <span class="nx">cavatarlink</span><span class="p">,</span> <span class="nx">cdate</span><span class="p">;</span>
</span><span class='line'>      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">resp</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">cuser</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">user</span><span class="p">.</span><span class="nx">login</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">cuserlink</span> <span class="o">=</span> <span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/&quot;</span><span class="o">&gt;</span><span class="nx">https</span><span class="o">:</span><span class="c1">//github.com/&lt;/a&gt;&amp;quot; + resp[i].user.login;</span>
</span><span class='line'>        <span class="nx">clink</span> <span class="o">=</span> <span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/%7B%7Bsite.github&quot;</span><span class="o">&gt;</span><span class="nx">https</span><span class="o">:</span><span class="c1">//github.com/{{site.github&lt;/a&gt;&lt;/u&gt;user}}/{{site.github_user}}.github.com/issues/{{page.github_issue_id}}#issuecomment-&amp;quot; + resp[i].url.substring(resp[i].url.lastIndexOf(&amp;quot;/&amp;quot;)+1);</span>
</span><span class='line'>        <span class="nx">cbody</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">body_html</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">cavatarlink</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">user</span><span class="p">.</span><span class="nx">avatar_url</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">cdate</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">resp</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">created_at</span><span class="p">)).</span><span class="nx">toLocaleString</span><span class="p">();</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;highlight&quot;</span><span class="o">&gt;&lt;</span><span class="nx">pre</span><span class="o">&gt;&lt;</span><span class="nx">code</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;language-text&quot;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">lang</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="o">&gt;</span>    <span class="nx">$</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="err">#</span><span class="nx">comments</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;).</span><span class="nx">append</span><span class="p">(</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">39</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="nx">comment</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="nx">comment</span><span class="o">-</span><span class="nx">header</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">a</span> <span class="kr">class</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="nx">comment</span><span class="o">-</span><span class="nx">user</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span> <span class="nx">href</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">39</span><span class="p">;</span> <span class="o">+</span> <span class="nx">cuserlink</span> <span class="o">+</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">39</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="nx">img</span> <span class="kr">class</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="nx">comment</span><span class="o">-</span><span class="nx">gravatar</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span> <span class="nx">src</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="err">#</span><span class="mi">39</span><span class="p">;</span> <span class="o">+</span> <span class="nx">cavatarlink</span> <span class="o">+</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">39</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span> <span class="nx">alt</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span> <span class="nx">width</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="mi">20</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span> <span class="nx">height</span><span class="o">=&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="mi">20</span><span class="o">&amp;</span><span class="nx">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">gt</span><span class="p">;</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">39</span><span class="p">;</span> <span class="o">+</span> <span class="nx">cuser</span> <span class="o">+</span> <span class="o">&amp;</span><span class="err">#</span><span class="mi">39</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="err">/a&amp;gt;&amp;lt;a class=&amp;quot;comment-date&amp;quot; href=&amp;quot;&amp;#39; + clink + &amp;#39;&amp;quot;&amp;gt;&amp;#39; + cdate + &amp;#39;&amp;lt;/a&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div class=&amp;quot;comment-body&amp;quot;&amp;gt;&amp;#39; + cbody + &amp;#39;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;#39;);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/code&gt;&lt;/pre&gt;&lt;/div&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>{% endif %}
</span></code></pre></td></tr></table></div></figure></p>

<p>I added an include for this new file in source/_includes/after_footer.html to
get it tacked on to each page:</p>

<p><figure class='code'><figcaption><span>source/<u>includes/after_footer.html </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{% include github<span class="nt">&lt;/u&gt;</span>comments.html %}
</span></code></pre></td></tr></table></div></figure></p>

<p>Those changes plus the OAuth application configuration described in Ivan&rsquo;s post have the blog all setup for comments. The only problem is that I have to remember to manually create an issue on the GitHub side and add it to the yaml front matter for the post. Being a lazy programmer I wanted to get rid of that burden as well. Lucky for me Octopress already has a Rake task that sets up a new blog post. The changes I made here aren&rsquo;t pretty, but they are pragmatic.</p>

<p><figure class='code'><figcaption><span>Rakefile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">create_comment_issue</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">require</span> <span class="o">&amp;</span><span class="n">lsquo</span><span class="p">;</span><span class="n">octopi</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="p">;</span>
</span><span class='line'>  <span class="kp">include</span> <span class="no">Octopi</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sr">&lt;p&gt;authenticated :config =&amp;gt; &amp;ldquo;_github.yml&amp;rdquo;  do</span>
</span><span class='line'><span class="sr">    user = User.find(&amp;ldquo;bd808&amp;rdquo;)</span>
</span><span class='line'><span class="sr">    repo = user.repository(:name =&amp;gt; &amp;ldquo;bd808.github.com&amp;rdquo;)&lt;/</span><span class="nb">p</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;highlight&quot;</span><span class="o">&gt;&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;language-text&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">lang</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="o">&gt;</span><span class="n">issue</span> <span class="o">=</span> <span class="no">Issue</span><span class="o">.</span><span class="n">open</span> <span class="ss">:user</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">user</span><span class="p">,</span> <span class="ss">:repo</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">repo</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:params</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="p">{</span>
</span><span class='line'>  <span class="ss">:title</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">title</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:body</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="no">Reader</span> <span class="n">comments</span> <span class="n">on</span> <span class="o">[</span><span class="c1">#{title}](#{url})&amp;quot;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nb">puts</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="no">Successfully</span> <span class="n">opened</span> <span class="n">issue</span> <span class="p">\</span><span class="c1">##{issue.number}&amp;quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">labels</span> <span class="o">=</span> <span class="n">issue</span><span class="o">.</span><span class="n">add_label</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">blog</span><span class="o">-</span><span class="n">post</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="n">issue</span><span class="o">.</span><span class="n">number</span>
</span><span class='line'><span class="o">&lt;</span><span class="sr">/code&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;</span>
</span><span class='line'><span class="sr">&lt;p&gt;end</span>
</span><span class='line'><span class="sr">end</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>I plugged this function into the existing <code>new_post</code> task so that it will
create an issue and plug it&rsquo;s id into the front matter for the new post
automatically when I run a command like <code>rake new_post[&quot;Using GitHub Issues
for Comments&quot;]</code>:</p>

<p><figure class='code'><figcaption><span>source/_posts/2012-04-14-using-github-issues-for-comments.markdown </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;hr&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;p&gt;layout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">post</span>
</span><span class='line'><span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="nl">&amp;ldquo</span><span class="l-Scalar-Plain">;Using GitHub issues for comments&amp;rdquo;</span>
</span><span class='line'><span class="l-Scalar-Plain">date</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">2012-04-14 20:22</span>
</span><span class='line'><span class="l-Scalar-Plain">comments</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</span><span class='line'><span class="l-Scalar-Plain">github_issue_id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">7&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;h2 id=&quot;categories:-&quot;&gt;categories</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
</feed>
